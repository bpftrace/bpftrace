name: Changelog reminder

# Configure to skip this workflow if CHANGELOG.md was modified
on:
  pull_request:
    paths-ignore:
    - "CHANGELOG.md"

jobs:
  comment-on-pr:
    if: "github.repository == 'iovisor/bpftrace'"
    runs-on: ubuntu-latest
    steps:
    - uses: github-actions-up-and-running/pr-comment@v1.0.0
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        message: |
          It looks like this PR doesn't have a CHANGELOG entry attached.

          If your change is non-trivial and user-facing, please add an entry to
          [the changelog](https://github.com/iovisor/bpftrace/blob/master/CHANGELOG.md)
          following the existing style.

          Otherwise, please feel free to ignore this.
